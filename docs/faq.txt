/**
* +--------------------------------------------------------------------+
* | MySource 3 - MySource Matrix                                       |
* +--------------------------------------------------------------------+
*
* $Id: faq.txt,v 1.10 2003/11/18 15:37:37 brobertson Exp $
* $Name: not supported by cvs2svn $
*/

+---------------------+
| MySource Matrix FAQ |
+---------------------+

This FAQ is designed to answer some of the most frequently asked and frustrating questions you may have about using the MySource Matrix content management system. All questions in this document are grouped into relevant sections.

+----------------+
| GENERAL        |
+----------------+

Q. When trying to log in using a correct username and password, i get blue errors, and a message "User not found"
A. Make sure that cookies are enabled in your browser.
   
   Enabling Cookies
   ---------------
   
   Internet Explorer.
   1. Go to Tools > Internet Options.
   2. Go to the Privacy Tab.
   3. Either change the privacy settings to a level where cookies are accepted (eg. Medium)
      or edit the list of IP addresses that cookies are allowed from by clicking the edit button near the bottom.
 
   Mozilla.
   1. Go to Tools > Options.
   2. go to the Privacy tab. 
   3. Expand the cookies list.
   4. Click Enable Cookies.


Q.
A.

+----------------+
| POSTGRESQL     |
+----------------+

Q. I get "[nativecode=ERROR:  language "plpgsql" does not exist" what do I do ?
A. run 'createlang -U postgres -d [MATRIX SYSTEM DB NAME] plpgsql'
Contributed by: Blair Robertson <blair@squiz.net>

+----------------+
| WYSIWYG EDITOR |
+----------------+

Q. Why is my toolbar still disabled when my popup window closes?
A. You may have popup blocker software interfering with the contents of the popup. The google toolbar is a known culprit. Try allowing popups from the editing URL. For example, if you edit through the URL test.com/_edit - configure your popup blocking software to allow popups from the URL test.com.
Contributed by: Greg Sherwood <greg@squiz.net>


+----------------+
| DEVELOPER FAQ  |
+----------------+

Q. When setting force_unlock="false" in the edit_interface_screens.xml, the lock is still released after commiting.
A. the correct value to force unlock is force_unlock="0"
Contributed by: Marc McIntyre <mmcintyre@squiz.net>

+-----------------+
| SYSTEM ADMIN    |
+-----------------+

Q. What things do I need to do when I move/copy a system from one place to another ?
A. There are several steps :

  ########################################################################################################################
  If you are moving the system from one server to another then there is one check that you need to do first.
  Run this command on both the old and the new servers :
       php -r 'var_export(get_defined_constants());' | grep -i CRYPT_

  Output should be something like this :
      'CRYPT_SALT_LENGTH' => 12,
      'CRYPT_STD_DES' => 1,
      'CRYPT_EXT_DES' => 0,
      'CRYPT_MD5' => 1,
      'CRYPT_BLOWFISH' => 0,

  Now if there is a difference between any of these values there could be a problem with logging in on the new system.
  See http://www.php.net/crypt for more info

  Basically if there is a difference then you will most likely have to reset everyone's passwords
  ########################################################################################################################

  1. Create a backup with backup.sh in the current root directory, just in case :)

  2. Copy everything under the system root from the old area to the new area

  3. Create the new database, if applicable, and copy the existing data to it

  4. Edit the [NEW SYSTEM ROOT]/data/private/conf/main.inc, alter :
       - SQ_CONF_DB_DSN and SQ_CONF_DB2_DSN if the database has changed
       - SQ_CONF_PEAR_PATH if this has changed
       - SQ_CONF_SYSTEM_ROOT_URLS if any root urls have changed

  5. Run [NEW SYSTEM ROOT]/scripts/system_move_update.php to update all the file version information

  6. If you are running the HIPO Server, then you will need to update the server config, 
     and get that re-read by the server. You may also need to edit [NEW SYSTEM ROOT]/data/private/conf/main.inc
     if any of these settings have changed

  7. If the Cron Jobs are running then the crontab entry will need to be edited/added for the new system root.
     ****NOTE**** - You will need to reset the Epoch of the Cron Manager to the time that this new crontab 
                    entry will be first run.

  8. WYSIWYG & HTML Tidy - If moving to a new server, then you will need to make sure that the HTML Tidy is
     installed on the server and the WYSIWYG plugin is pointing to the correct place

That should be it, have fun
Contributed by: Blair Robertson <brobertson@squiz.net>


+----------------+
| HIPO SERVER    |
+----------------+
Q. How do I Start a HIPO Server ?
A.
    Designate a Master HIPO System.
    in the script dir of this system create a file server.conf in the form of this :
    <?php

    $systems = Array(
            'bcr'  => '/home/brobertson/resolve',
            'slq'  => '/home/mysource_testbed/matrix_slq',
            'greg' => '/home/gsherwood/mysource_matrix',
            'demo' => '/home/mysource_testbed/matrix_demo',
            'dom'  => '/home/dwong/resolve',
            'marc'  => '/home/mmcintyre/resolve',
    );

    ?>

    Then run this :
      $ screen
      $ cd /[SYSTEM ROOT FOR SYSTEM THAT IS HIPO MASTER]/scripts/
      $ php start_hipo_server.php

    To detach the screen CTRL+A,CTRL+D

    To re-attach :
      $ screen -ls 
      There is a screen on:
              30077.pts-3.beta        (Detached)
      1 Socket in /tmp/uscreens/S-brobertson.
      $ screen -r 30077.pts-3.beta


Q. How do I add a system to the HIPO Server ?
A. Add the entry to the server.conf in the Master HIPO System's script directory
    Then do this :
    $ cd /[SYSTEM ROOT FOR SYSTEM THAT IS HIPO MASTER]/scripts/
    $ grep "Server Started" server.log | tail -n1
    [22-Oct-2003 17:03:36] Server Started -> PID : 30210, listening on port 9090

Pick the process id of the server and then send a SIGUSR1 to that process

    $ kill -SIGUSR1 30210
    $ tail server.log
    [22-Oct-2003 17:20:39] Caught SIGUSR1...Re-Reading in Config Files
    [22-Oct-2003 17:20:39] System "bcr" loaded
    [22-Oct-2003 17:20:39] System "slq" loaded
    [22-Oct-2003 17:20:39] System "greg" loaded
    [22-Oct-2003 17:20:39] System "demo" loaded
    [22-Oct-2003 17:20:39] System "dom" loaded
    [22-Oct-2003 17:20:39] System "marc" loaded
    [22-Oct-2003 17:20:39] Config File /home/brobertson/resolve/scripts/server.conf Loaded

    


