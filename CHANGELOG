MYSOURCE MATRIX CHANGELOG

VERSION 3.10.0 RC1

Featured Changes
-----------------------------------

Resume Stalled HIPO Jobs

    You are now able to resume HIPO jobs that have stalled within the system, which can happen if a window containing a HIPO is closed, or if your connection timed out. A link now is available in the HIPO Herder to allow you to resume the job and run it to completion.


Parent Cookie Domains Configuration Variable

    The new SQ_CONF_SYSTEM_PARENT_DOMAINS variable allows you to modify the domain on record for cookies saved by MySource Matrix. This can be used to allow a number of Sites that are set up as subdomains of a common parent domain (eg. two sites using URLs of site1.example.com and site2.example.com) to share session and cookie variables without requiring the use of Site Networks.


Proxy Configuration Screen

    This new System Configuration screen allows you to set the proxy settings that MySource Matrix uses to access external content, as is done by assets such as Remote Content and the Links Report. If the application server has a proxy in front of it, these settings are necessary for assets accessing external content to work correctly.


Apache Configuration Screen

    This new System Configuration screen allows MySource Matrix data to be made available to Apache and its modules as a "request note". This can be used, for example, to record user information in Apache's access logs. Keywords from the currently logged in user, or from the currently displayed asset (keywords common to all assets only) can be used.


Messaging Service Configuration Screen

    This new System Configuration screen allows configuration of internal message logging settings, without having to edit the messaging_service.conf file directly.


Structured Asset Info Report Asset

    This new core asset allows you to generate a summary report displaying the contents of standard asset fields for a tree of assets underneath a certain root node. The short name and status of each asset, along with the fields selected, are displayed. The assets selected can also be limited by type code.


Triggers Now Displayed in Asset Map

    Triggers are now displayed as shadow assets underneath the Trigger Manager asset, avoiding the need to access the Triggers screen of that asset to edit a trigger. Triggers are listed in alphabetical order, with disabled triggers at the bottom of the list.


Structured File Importer Tool

    A new tool has been developed to import files into MySource Matrix and create a structured tree of standard pages. The tool first converts the file to HTML before creating a new page for each heading it finds (heading levels to break on are configurable). The contents of the section become the contents of the page and the heading levels define parent/child relationships (eg. a H3 heading is a child of a H2 heading). The tool initially supports the importing of HTML files and Word Documents but can later be extended to other formats that can be converted to HTML, such as PDF files.


Mass Clone Tool

    This new tool allows you to make multiple clones of a certain asset to be added underneath a specified parent asset. The type of link between the new parent and the clones can also be specified.


New LDAP Configuration Options

    The ability to use LDAP version 3 is now available for all LDAP systems, instead of just for OpenLDAP. Bridges that currently have OpenLDAPv3 selected as the directory type will be reverted to the OpenLDAP option and have the new "use version 3" checkbox selected by default. Another new option has been added to disallow LDAP referrals. Some Active Directory installations may require this option to be set. If you have trouble connecting to a directory (eg. the system hangs when expanding the LDAP Bridge asset) you may need to select this option.


User IP Condition Improved

    This condition now allows you to configure multiple network IPs and subnet masks, rather than the previous "single IP with wildcards" approach. A "grant/deny" system is used so you can grant access to some IPs and deny access to others in the same condition. Additionally, you can import IP conditions from a CSV file to make the setup of similar conditions (or very large IP rules) much easier.


Is Posted Condition

     This new condition asset will return TRUE if a form has been posted. The is useful if you want to stop something in the site design from interfering with a form submission.


WYSIWYG Insert Anchor Plugin Now Handles Anchor Editing

    Previously, you could only insert new anchors into the WYSIWYG editor. You could not delete or edit them without manually editing the HTML. The Insert Anchor WYSIWYG plugin now provides an interface for editing and removing existing anchors.


WYSIWYG Definition List Plugin

    A new plugin has been added to the WYSIWYG editor to allow for the creation of definition lists (tagged as "<dl>"). Definition lists consist of terms ("<dt>" tags), which are limited to inline content, and descriptions ("<dd>" tags) which can contain block content. After beginning a definition list (by clicking either the DT or DD buttons), the Control+D keystroke combination switches to the next term or definition. Clicking the currently selected tag type or pressing Control+D twice ends the list.


WYSIWYG Visual Aid Plugin

    This new plugin allows you to display visual indicators for hidden elements. It currently displays indicators for span tags with the lang attribute, anchors and table borders; paragraphs and line breaks; and the difference between a table header and a table cell.


Long Description URL in WYSIWYG Insert Image Plugin

    The Insert Image plugin now allows you to set a "longdesc" attribute for accessibility purposes. This attribute is a URL or anchor that points to a longer text description of an image. This can be set to either a MySource Matrix asset or an external URL.


WYSIWYG HTML Tidy Status Icon

    A new icon now appears at the top of the DIV or table cell editing toolbar that indicates if HTML Tidy has been run on the content. A grey icon indicates that HTML Tidy is disabled and is not running on the piece of content. A yellow icon indicates that HTML Tidy has never been run on the content. A green icon indicates that HTML Tidy was able to clean the content last time the content was committed. A red icon indicates that HTML Tidy failed to clean the content (for whatever reason) last time the content was committed.


Bodycopy Container Status Displayed in WYSIWYG

    The status of a Bodycopy Container (DIV or Table) is now displayed on the tooltip for the Edit Properties button. This allows for an editor to quickly see which pieces of content require approval while editing.


Asset Map in WYSIWYG Insert Dialogs Retains Last Position

    When inserting images, links or movies in the WYSIWYG, the asset map that appears in the popup will now remember where it last was and will auto-expand to that location. Each of the different WYSIWYG popups remember their last position independently, so the image asset map will remain in the image library while the link asset map will remain in the site, for example. Logging out clears the asset map's memory.


Disable Caching for System Root URL

    The Cache Manager now has the ability to disable caching per system root URL. If a user is viewing a page via a non-cachable system root URL, the system will behave as if the no-cache suffix is being used.


Listing Engine Group Count Keywords

    Two new keywords have been added to the listing engine assets, allowing them to print the number of grouped assets below them. The keyword %group_immed_child_group_count% will print the number of assets directly in the group (which may themselves be groups of assets) and %group_total_child_asset_count% will print the total number of child assets in the current grouping level and all sub-groups.


Asset Map Auto-Teleport Preference

    This new preference specifies an asset to auto-teleport users to when they log in. Both the administration and simple asset maps show this asset as the root of the asset tree, just as if the user had right-clicked the asset and selected "Teleport". The preference is configurable per user group. If a user exists in more than one group, a common parent asset is found for all the auto-teleport assets and the user is teleported there instead. Note that this may be the normal root node of the system if a common parent cannot be found. The "restore root" button in the asset map still allows the user to change the asset map view to the root folder. However, it will now return the user to their original auto-teleported root node if clicked while viewing the root folder.


Auto-Expand in Asset Map

    When an asset is accessed using the Admininstration interface suffix (default "/_admin"), the asset map will now expand and select that asset so you can begin editing it and its neighbours and parents more easily.


Clean Query String Design Variable

    The "asset_link" design print variable now has an "clean_query_string" option, allowing any MySource Matrix query string variables (those beginning with "SQ_") to be cleaned so that previous actions (such as logging in and out) are not inadvertently added to, or conflict with, printed asset links.


Release Locks Button in Simple Edit

    A new keyword (%release_locks_button%) can now be used in Simple Edit layouts to allow you to print a "Release Locks" button. When the Release Locks button is pressed, the locks on the asset are released and the user exits the Simple Edit interface.


Release All Locks You Hold

    User assets now have a button on their Details screen that releases all locks that user holds. The current user's Details screen is available from the My Space tab, if it is not accessible by other means. Users require admin permission on a User asset in order to release that user's locks.


Auto-Redirect to Forced HTTPS URLs

    If a HTTP protocol is used on a URL that requires the use of the HTTPS protocol, the system will now automatically redirect to the secure URL instead of returning a "page not found" error.


Links Report Filtering Options

	The Links Report asset now gives you the option of hiding any of the main linking sections (internal, external and mailto links) so you can customise the report for your requirements. You can also choose to show only broken or only working links inside each of those linking sections.


Enable "Contains" Search Option

    The Search Manager asset now has a global setting that determines whether searches within the system will match any part of a word. This option, enabled by default (as the previous behavour of searches), can be disabled to improve performance. However, with this option disabled, searches will be limited to "Begins With" searches.


Type Formats in Site Map

    Individual formatting of assets based on type, similar to the Listing Engine's functionality, is now available in the Site Map asset.


Current User Global Design Variable

    Attributes and keywords relating to the current user can now be printed from a design by a MySource_PRINT tag. Using a "var" attribute of "current_user", attributes can be printed by specifying the "attr" attribute, while keywords can be printed by specifying the "keyword" attribute.


New Remote Content Filtering Options

    A new "Get Content from All Occurrences" option in Remote Content allows you to control the matching of multiple occurrences of start and end tags in content filtering, so as whether to use all occurrences or stop after the first end tag. A "When Tag(s) Not Found" option has also been added, which can suppress the display of all content when start and end tags are used but not found.


Re-send Account Manager Validation Email

    This new feature allows users to re-request a validation email that was sent from an Account Manager asset. Three new keywords have also been added to the Not Logged In bodycopy to display a form where a user can enter their username and have the validation email resent to them; print validation resend errors; and a success message.


Manual Validation of Accounts in Account Manager

    The account manager page now lists all accounts that have not been validated and allows you to validate or reject each of them. This feature is useful if a user has lost their validation email and rings you for manual validation, or if you want to clean up accounts that have not been validated in a while.


Automatic Re-send/Purge Options in Account Manager

    These new options allow you to set a time period after which validation emails are re-sent to users who are yet to activate their accounts, and after which unvalidated accounts are purged. The Cron Manager must be properly sent for these options to take effect.


Next and Previous Page HREF Keywords for Listing Engine

    Listing Engine assets can now print the URL of the next and previous pages, instead of relying on the linked %previous_page% and %next_page% keywords. This allows further customisation of Next and Previous page links - for example, usage of images or buttons instead of a text link.


File Upload Attachments for Form Submission Emails

    Uploaded files in a custom form can now be attached to form submission and receipt emails. To enable this feature, select the new "Attach to Emails" option on your form questions and then select "Allow attachments" for the email formats. This allows you specify which file upload questions should have their files attached to emails and which emails will actually have files attached to them.


Set Content Type on Bodycopy Container Creation

    The Insert DIV/Insert Table screen in a Bodycopy now allows you to select the type of content to create, instead of simply defaulting to the Bodycopy Container "Default Content Type" preference setting (which becomes the default selection for this new feature).


Cron Blackout Periods

    The Cron Manager asset now allows you to set a period (or periods) of time where Cron Jobs will not be run. Cron Jobs that are scheduled to run during a blackout period will instead be run the first time after the blackout period concludes.


Foreign Key System Integrity Script

    This script reports on the integrity of foreign keys within a MySource Matrix database. It defines relations between certain key fields (for instance, the assetid field in the sq_ast table) and fields in other tables. If it finds a field in any table with the same name as one defined as related, it will report any values in that table that does not exist in the key table. The information gathered from this script could then be used by an administrator to write an SQL query to remove the invalid rows if desired.


Rolling Calendar Page Improved

    The rolling calendar page can now display an arbitrary period relative to the current date (eg. from 3 days in the future to 7 days in the future), as well as filter out unwanted weekdays (eg. only show weekends).


Multiple Columns and Styling for Calendar Events

    Calendar Event assets linked under several event sources on a Calendar Page can now have several CSS classes applied to it and appear in several columns, rather than just that of the most direct parent.


Dynamic Event Sources for Calendar Page

    The Calendar Page asset now supports dynamic event sources (similar to the Listing Engine's dynamic root nodes). These do not interfere with the customisation (CSS classing and columnisation) done according to the original root nodes.


Calendar Page "Link to Today" Keyword

    A new %today_link% keyword is now available in Calendar Page views that paints a link to the time period containing today's date (depending on the current view). The text for this link is configurable in the Details screen.


Custom Form Submissions Now Listable

    Form submissions can now be listed by Listing Engine assets, with keyword replacements that allow you to list the name and value of each question, as well as the submission summary. They can also have URLs and be made available on the frontend using designs and paint layouts.


Password Blacklist System

    System Administrators can now enter a list of banned passwords on the Password Rules Config screen. The blacklist can be set up to match banned passwords exactly, or to match any part of a user's password.


Keywords Now Usable in Form Question Default Values

    Asset keywords are now able to be used in default values for Form Question assets. Keywords starting with "%asset_" relate to the Form Question being painted. Keywords relating to the currently logged in user can also be used (beginning with "%current_user_" instead of "%asset_").


Sticky Submitted Values Option for Form Questions

    An option now exists in Form Question assets to make a submitted value "sticky" until the end of the user's session. When a value is "stuck", other Form Questions using the same question title will use any "stuck" submitted values as their default value if their "sticky" attribute is also set.


"Today's Date" Style in Calendar Page

    Calendar cells that represent today's date (according to the server clock, not as represented by the SQ_CALENDAR_DATE variable) now have an additional "today" CSS class applied, so these cells can be styled differently if desired.


Calendar View Linking Now Configurable

    Links to Calendar Events on Calendar Pages can now point to either the Calendar Page's event view or the Calendar Event's own URL. This allows Calendar Events to be displayed independently of the Calendar Page, and allows the use of Paint Layouts on the events.


Calendar Event Label Now Configurable

    The event label of Calendar Events are now configurable in the Calendar Page asset, defaulting to the previous label of the asset name. Keywords that apply to Calendar Events can be included in the label.


Listing Engine "Random" Sort By Option

    All Listing Engine assets now have a new "Random" sort by option on the Asset Sorting screen. Unlike a Random list format, content printed with this option can still be cached by the Cache Manager.


Failed Login Attempts Now Logged

    Failed login attempts are now logged in the MySource Matrix system log, along with the reason for the failed login.


Site and Redirect Page Simple Edit Improvements

    Redirect Pages are now editable from the Simple Edit interface, instead of redirecting to the asset being pointed to by the Redirect Page. Sites can also now be edited using the Simple Edit prefix and the "limbo_assetid" keyword set to the asset ID of the Site asset.


"Disable Image Resizing" WYSIWYG Preference

    When this option is set, images provided by the MySource Matrix system (through Image or Image Variety assets) will be forced to their natural dimensions. Any attempt to alter their dimensions will result in the WYSIWYG resetting them.


Access History Design Area Improvements

    An option has been added to stop pages from automatically being added to the access history list. Pages can then be manually added to, or deleted from, the access history by the user on the frontend. This allows the Access History design area to work, for example, as a user-customisable "my favourite links" area.


Multiple Thesaurus Support for Content Tagging

    A new option in the Tag Manager allows content tags to come from any thesaurus in the system, instead of the previous single thesaurus restriction.


Additional Level of Keyword Replacement

    Keyword replacement is now possible after after printFrontend() is completed, using a new function in the MySource class. This is used by the Bulkmail system in email generation.


Additional Changes and Bug Fixes
-----------------------------------

Core

+ Percent signs in bodycopies with keywords disabled are now replaced with entity equivalent ("&#37;")
+ If-Last-Modified cacheable header checks now look in CGI environment variables if Apache module is not present
+ Metadata fields are no longer exclusively linked to metadata sections
+ Linking screen of assets are now paginated, displaying 50 lineages to a page
+ Remap Manager's listing of remapped URLs is now paginated, displaying 100 remaps to a page
+ Metadata screen now warns of duplicate metadata field names applied to an asset
+ Current status can now be cascaded by checking "Cascade Status Change" and leaving the drop-down blank
+ Preview screen now defaults to URL closest to the URL currently being used
+ Multiple URLs can now be added to Site asset at once
+ WYSIWYG now correctly uses "<p>" tags for paragraphs in Internet Explorer
+ New WYSIWYG Citation plugin that wraps text in "<cite>" tags
+ New WYSIWYG Definition plugin that wraps text in "<dfn>" tags
+ New WYSIWYG Blockquote plugin that wraps text in "<blockquote>" tags
+ New WYSIWYG Language plugin that marks a piece of text with a "lang" HTML/XHTML attribute
+ New Trigger Event that fires when a link is deleted
+ New Trigger Event that fires before an asset is deleted
+ New Trigger Event that fires when an attribute is changed
+ New Trigger Action to send an email when an event occurs
+ New Trigger Action to clear MySource Matrix's cache for the current asset or a group of assets
+ New Trigger Action to automatically fail the trigger

CMS

+ Asset Builder can now submit to current URL, rather than just the its own URL (Asset Builder)
+ Asset Builder no longer clears submitted values on error (Asset Builder)
+ Listing Engine can now submit to current URL, rather than just the its own URL (Listing Engine)
+ Linked Group Name keyword added for Listing Engine assets grouped by parent asset (Listing Engine)
+ New keywords allow printing of parent asset's contents when grouping by parent asset (Listing Engine)
+ Submission Asset ID keyword now available in Thank You bodycopy and submission emails (Custom Form)
+ Links Report can now be exported to a CSV file (Links Report)
+ User can now be selected via asset picker as additional recipient for form emails (Custom Form)
+ Submission time added to %form_info% keyword (Custom Form)

News

+ Summary and body attributes added to News Item's create screen (News Item)

LDAP

+ LDAP users now have an inbox, accessible from the My Space tab, so they can manage their own internal messages (LDAP User)
